---
import { getCollection } from "astro:content";
import { getMissionsMenu, getArticlesMenu, getDiscoveriesMenu, getGalaxiesMenu, getBlackHolesMenu } from "../../utils/nav-menu/getCollectionMenu";
import { NavMenuLinks } from "../../data/NavMenu";
import LinksList from "./LinksList.astro";

const programs = await getCollection("programs");
const missions = await getCollection("missions");
const independentMissions = await getCollection("missions", ({ data }) => {
    return !data.program;
});

const categories = await getCollection("categories");
const articles = await getCollection("articles");

const galaxyTypes = await getCollection("galaxy-types");
const galaxyTypesSorted = galaxyTypes.sort((a, b) => a.data.order - b.data.order);
const galaxies = await getCollection("galaxies");

const blackHoles = await getCollection("black-holes");

const spaceMissions = getMissionsMenu(programs, missions, independentMissions);
const articlesMenu = getArticlesMenu(categories, articles);
const discoveries = getDiscoveriesMenu(categories);
const galaxiesMenu = getGalaxiesMenu(galaxyTypesSorted, galaxies);
const blackHolesMenu = getBlackHolesMenu(blackHoles);

const allMenuLinks = [
    ...NavMenuLinks.slice(0, 1), // Obtenemos la primera posición (la 1 no se incluye).
    discoveries,
    ...NavMenuLinks.slice(1, 2), // Obtenemos la segunda posición.
    spaceMissions, // Añadimos el menú de las misiones espaciales en la cuarta posición.
    articlesMenu, // Menú de los artículos y sus categorías en la quinta posición.
    galaxiesMenu, // Menú de las galaxias en la sexta posición.
    blackHolesMenu,
];
---

<LinksList linksList={allMenuLinks} />